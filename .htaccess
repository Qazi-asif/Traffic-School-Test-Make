# ==================================================
# Laravel Root .htaccess for cPanel / public_html
# ==================================================

# Default index file
DirectoryIndex index.php public/index.php

<IfModule mod_rewrite.c>
RewriteEngine On

# --------------------------------------------------
# Block access to sensitive files and folders
# --------------------------------------------------
RewriteRule ^(\.env|composer\.json|composer\.lock|artisan|server\.php)$ - [F,L]
RewriteRule ^(app|bootstrap|config|database|resources|routes|vendor)/ - [F,L]

# --------------------------------------------------
# Allow specific PHP files from public folder (BEFORE Laravel routing)
# --------------------------------------------------
# Allow maintenance control file from public folder
RewriteRule ^maintenancecbfbvib4767436667gdgdggdgfgfdfghdgh\.php$ public/maintenancecbfbvib4767436667gdgdggdgfgfdfghdgh.php [L]

# Allow other specific PHP files from public folder if they exist
RewriteCond %{DOCUMENT_ROOT}/public/$1 -f
RewriteRule ^([^/]+\.php)$ public/$1 [L]

# --------------------------------------------------
# Serve existing files and directories directly
# --------------------------------------------------
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# --------------------------------------------------
# Redirect everything else to Laravel's public folder
# --------------------------------------------------
RewriteRule ^ public/index.php [L]

</IfModule>

# Disable directory listing
Options -Indexes

# --------------------------------------------------
# PHP Settings (optional, adapt as needed)
# --------------------------------------------------
<IfModule php8_module>
php_value memory_limit 256M
php_value post_max_size 128M
php_value upload_max_filesize 64M
php_value max_execution_time 120
php_value max_input_time 120
</IfModule>

<IfModule lsapi_module>
php_value memory_limit 256M
php_value post_max_size 128M
php_value upload_max_filesize 64M
php_value max_execution_time 120
php_value max_input_time 120
</IfModule>

# php -- BEGIN cPanel-generated handler, do not edit
# This domain inherits the "PHP" package.
# php -- END cPanel-generated handler, do not edit

#----------------------------------------------------------------cp:ppd
# Section managed by cPanel: Password Protected Directories     -cp:ppd
# - Do not edit this section of the htaccess file!              -cp:ppd
#----------------------------------------------------------------cp:ppd
AuthType Basic
AuthName "course.dummiestrafficschool.com"
AuthUserFile "/home2/ewyqummy/.htpasswds/course.dummiestrafficschool.com/passwd"
Require valid-user
#----------------------------------------------------------------cp:ppd
# End section managed by cPanel: Password Protected Directories -cp:ppd
#----------------------------------------------------------------cp:ppd